/*
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved. Modified Extensively by Waylan Wong, Will Rain IT, Inc (C)2013
 @license MIT License
*/
(function(c,h){function a(){}function k(){}function b(){}function d(b,a){"string"===typeof a&&(a=a.split("."));var f=a.join(".").replace(/\.(\w)/g,function(b,d){return d.toUpperCase()}),c=a.shift(),e;typeof(e=b[f])==n&&typeof(e=b[c])!=n&&0<a.length&&(e=d(e,a));return e}function g(){function b(d,c){f.bind(d,function(){return c.apply(a,arguments)})}var d=q.apply(arguments),a=this,f=1===d.length?a:d.shift(),c,d=d[0]||{};for(c in d)b(c,d[c])}function f(b,d){return{input:b,form:d}}var l=(JSON||{}).stringify,
q=Array.prototype.slice,e,n="undefined",p={itemManager:k,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!l)throw Error("JSON.stringify() not found");e=k.prototype;e.init=function(b){};e.filter=function(b,d){var a=[],c,f;for(c=0;c<b.length;c++)f=b[c],this.itemContains(f,d)&&a.push(f);return a};e.itemContains=
function(b,d){return 0<=this.itemToString(b).toLowerCase().indexOf(d.toLowerCase())};e.stringToItem=function(b){return b};e.itemToString=function(b){return b};e.compareItems=function(b,d){return b==d};e=a.prototype;e.init=function(b,d){var a=this,f,e,g;a._defaults=c.extend({},p);a._opts=d||{};a._plugins={};a._itemManager=e=new (a.opts("item.manager"));b=c(b);g=c(a.opts("html.wrap"));f=c(a.opts("html.hidden"));b.parent().wrap(g).keydown(function(b){return a.onKeyDown(b)}).keyup(function(b){return a.onKeyUp(b)}).data("textext",
a);c(a).data({hiddenInput:f,wrapElement:b.parents(".text-wrap").first(),input:b});f.attr("name",b.attr("name"));b.attr("name",null);"submit"===b.next().attr("type")||b.next().hasClass("btn")?(f.insertAfter(b.next()),b.next().bind("click",function(a){a.preventDefault();b.focus()})):f.insertAfter(b);c.extend(!0,e,a.opts("ext.item.manager"));c.extend(!0,a,a.opts("ext.*"),a.opts("ext.core"));a.originalWidth=b.outerWidth();a.invalidateBounds();e.init(a);a.initPatches();a.initPlugins(a.opts("plugins"),
c.fn.textext.plugins);a.on({setFormData:a.onSetFormData,getFormData:a.onGetFormData,setInputData:a.onSetInputData,anyKeyUp:a.onAnyKeyUp});a.trigger("postInit");a.trigger("ready");a.getFormData(0)};e.initPatches=function(){var b=[],a=c.fn.textext.patches,d;for(d in a)b.push(d);this.initPlugins(b,a)};e.initPlugins=function(b,a){var d,f,e=[],g;"string"==typeof b&&(b=b.split(/\s*,\s*|\s+/g));for(g=0;g<b.length;g++)if(d=b[g],f=a[d])this._plugins[d]=f=new f,this[d]=function(b){return function(){return b}}(f),
e.push(f),c.extend(!0,f,this.opts("ext.*"),this.opts("ext."+d));e.sort(function(b,a){b=b.initPriority();a=a.initPriority();return b===a?0:b<a?1:-1});for(g=0;g<e.length;g++)e[g].init(this)};e.hasPlugin=function(b){return!!this._plugins[b]};e.on=g;e.bind=function(b,a){this.input().bind(b,a)};e.trigger=function(){var b=arguments;this.input().trigger(b[0],q.call(b,1))};e.itemManager=function(){return this._itemManager};e.input=function(){return c(this).data("input")};e.opts=function(b){var a=d(this._opts,
b);return"undefined"==typeof a?d(this._defaults,b):a};e.wrapElement=function(){return c(this).data("wrapElement")};e.invalidateBounds=function(){var b=this.input(),a=this.wrapElement(),d=a.parent(),f=this.originalWidth+"px",c;this.trigger("preInvalidate");c=b.outerHeight()+"px";b.css({width:f});a.css({width:f,height:c});d.css({height:c});this.trigger("postInvalidate")};e.focusInput=function(){this.input()[0].focus()};e.serializeData=l;e.hiddenInput=function(b){return c(this).data("hiddenInput")};
e.getWeightedEventResponse=function(b,a){var d={},f=0;this.trigger(b,d,a);for(var c in d)f=Math.max(f,c);return d[f]};e.getFormData=function(b){b=this.getWeightedEventResponse("getFormData",b||0);this.trigger("setFormData",b.form);this.trigger("setInputData",b.input)};e.onAnyKeyUp=function(b,a){this.getFormData(a)};e.onSetInputData=function(b,a){this.input().val(a)};e.onSetFormData=function(b,a){this.hiddenInput().val(this.serializeData(a))};e.onGetFormData=function(b,a){var d=this.input().val();
a[0]=f(d,d)};c(["Down","Up"]).each(function(){var b=this.toString();e["onKey"+b]=function(a){var d=this.opts("keys")[a.keyCode],f=!0;d&&(f="!"!=d.substr(-1),d=d.replace("!",""),this.trigger(d+"Key"+b),"Up"==b&&this._lastKeyDown==a.keyCode&&(this._lastKeyDown=null,this.trigger(d+"KeyPress")),"Down"==b&&(this._lastKeyDown=a.keyCode));this.trigger("anyKey"+b,a.keyCode);return f}});e=b.prototype;e.on=g;e.formDataObject=f;e.init=function(b){throw Error("Not implemented");};e.baseInit=function(b,a){b._defaults=
c.extend(!0,b._defaults,a);this._core=b;this._timers={}};e.startTimer=function(b,a,d){var f=this;f.stopTimer(b);f._timers[b]=setTimeout(function(){delete f._timers[b];d.apply(f)},1E3*a)};e.stopTimer=function(b){clearTimeout(this._timers[b])};e.core=function(){return this._core};e.opts=function(b){return this.core().opts(b)};e.itemManager=function(){return this.core().itemManager()};e.input=function(){return this.core().input()};e.val=function(b){var a=this.input();if(typeof b===n)return a.val();a.val(b)};
e.trigger=function(){var b=this.core();b.trigger.apply(b,arguments)};e.bind=function(b,a){this.core().bind(b,a)};e.initPriority=function(){return 0};var r=!0,m=c.fn.textext=function(b){var d;r||null==(d=c.fn.textext.css)||(c("head").append("<style>"+d+"</style>"),r=!0);return this.map(function(){var d=c(this);if(null==b)return d.data("textext");var f=new a;f.init(d,b);d.data("textext",f);return f.input()[0]})};m.addPlugin=function(b,a){m.plugins[b]=a;a.prototype=new m.TextExtPlugin};m.addPatch=function(b,
a){m.patches[b]=a;a.prototype=new m.TextExtPlugin};m.TextExt=a;m.TextExtPlugin=b;m.ItemManager=k;m.plugins={};m.patches={}})(jQuery);(function(c){function h(){}c.fn.textext.TextExtIE9Patches=h;c.fn.textext.addPatch("ie9",h);c=h.prototype;c.init=function(a){if(-1!=navigator.userAgent.indexOf("MSIE 9"))a.on({postInvalidate:this.onPostInvalidate})};c.onPostInvalidate=function(){var a=this.input(),c=a.val();a.val(Math.random());a.val(c)}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtAjax=h;c.fn.textext.addPlugin("ajax",h);var a=h.prototype,k={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:!1,dataCallback:null}};a.init=function(b){this.baseInit(b,k);this.on({getSuggestions:this.onGetSuggestions});this._suggestions=null};a.load=function(b){var a=this,g=a.opts("ajax.data.callback")||function(b){return{q:b}},g=c.extend(!0,{data:g(b),success:function(f){a.onComplete(f,b)},error:function(a,d){console.error(d,
b)}},a.opts("ajax"));c.ajax(g)};a.onComplete=function(b,a){var c=b;this.dontShowLoading();!0==this.opts("ajax.cache.results")&&(this._suggestions=b,c=this.itemManager().filter(b,a));this.trigger("setSuggestions",{result:c})};a.dontShowLoading=function(){this.stopTimer("loading")};a.showLoading=function(){var b=this;b.dontShowLoading();b.startTimer("loading",b.opts("ajax.loading.delay"),function(){b.trigger("showDropdown",function(a){a.clearItems();a.addDropdownItem(b.opts("ajax.loading.message")).addClass("text-loading")})})};
a.onGetSuggestions=function(b,a){var c=this,f=c._suggestions,l=(a||{}).query||"";if(f&&!0===c.opts("ajax.cache.results"))return c.onComplete(f,l);c.startTimer("ajax",c.opts("ajax.type.delay"),function(){c.showLoading();c.load(l)})}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtArrow=h;c.fn.textext.addPlugin("arrow",h);var a=h.prototype,k={html:{arrow:'<div class="text-arrow"/>'}};a.init=function(b){var a=this;a.baseInit(b,k);a._arrow=b=c(a.opts("html.arrow"));a.core().wrapElement().append(b);b.bind("click",function(b){a.onArrowClick(b)})};a.onArrowClick=function(b){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtAutocomplete=h;c.fn.textext.addPlugin("autocomplete",h);var a=h.prototype,k={autocomplete:{enabled:!0,dropdown:{position:"below",maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};a.init=function(b){var a=this;a.baseInit(b,k);b=a.input();var g;!0===a.opts("autocomplete.enabled")&&(a.on({blur:a.onBlur,anyKeyUp:a.onAnyKeyUp,deleteKeyUp:a.onAnyKeyUp,
backspaceKeyPress:a.onBackspaceKeyPress,enterKeyPress:a.onEnterKeyPress,escapeKeyPress:a.onEscapeKeyPress,setSuggestions:a.onSetSuggestions,showDropdown:a.onShowDropdown,hideDropdown:a.onHideDropdown,toggleDropdown:a.onToggleDropdown,postInvalidate:a.positionDropdown,getFormData:a.onGetFormData,downKeyDown:a.onDownKeyDown,upKeyDown:a.onUpKeyDown}),g=c(a.opts("html.dropdown")),"submit"===b.next().attr("type")||b.next().hasClass("btn")?g.insertAfter(b.next()):g.insertAfter(b),a.on(g,{mouseover:a.onMouseOver,
mousedown:a.onMouseDown,click:a.onClick}),g.css("maxHeight",a.opts("autocomplete.dropdown.maxHeight")).addClass("text-position-"+a.opts("autocomplete.dropdown.position")),c(a).data("container",g),c(document.body).click(function(b){a.isDropdownVisible()&&!a.withinWrapElement(b.target)&&a.trigger("hideDropdown")}),a.positionDropdown())};a.containerElement=function(){return c(this).data("container")};a.onMouseOver=function(b){b=c(b.target);b.is(".text-suggestion")&&(this.clearSelected(),b.addClass("text-selected"))};
a.onMouseDown=function(b){this.containerElement().data("mousedownOnAutocomplete",!0)};a.onClick=function(b){b=c(b.target);(b.is(".text-suggestion")||b.is(".text-label"))&&this.trigger("enterKeyPress");this.core().hasPlugin("tags")&&this.val("")};a.onBlur=function(b){b=this.containerElement();var a=!0===b.data("mousedownOnAutocomplete");this.isDropdownVisible()&&(a?this.core().focusInput():this.trigger("hideDropdown"));b.removeData("mousedownOnAutocomplete")};a.onBackspaceKeyPress=function(b){(0!=
this.val().length||this.isDropdownVisible())&&this.getSuggestions()};a.onAnyKeyUp=function(b,a){var c=null!=this.opts("keys."+a);0<this.val().length&&!c&&this.getSuggestions()};a.onDownKeyDown=function(b){this.isDropdownVisible()?this.toggleNextSuggestion():this.getSuggestions()};a.onUpKeyDown=function(b){this.togglePreviousSuggestion()};a.onEnterKeyPress=function(b){this.isDropdownVisible()&&this.selectFromDropdown()};a.onEscapeKeyPress=function(b){this.isDropdownVisible()&&this.trigger("hideDropdown")};
a.positionDropdown=function(){var b=this.containerElement();this.opts("autocomplete.dropdown.position");this.core().wrapElement().outerHeight();b.css({});try{b.slimScroll({height:parseInt(this.opts("autocomplete.dropdown.maxHeight").substring(0,this.opts("autocomplete.dropdown.maxHeight").length-2))+1+"px",size:"15px"}),b.css({width:"100%"})}catch(a){console.log("In textext.js, missing the slimScroll.js file! Cannot set custom suggestion box size.")}};a.suggestionElements=function(){return this.containerElement().find(".text-suggestion")};
a.setSelectedSuggestion=function(b){if(b){var a=this.suggestionElements(),g=a.first(),f,l;this.clearSelected();for(l=0;l<a.length;l++)if(f=c(a[l]),this.itemManager().compareItems(f.data("text-suggestion"),b)){g=f.addClass("text-selected");break}g.addClass("text-selected");this.scrollSuggestionIntoView(g)}};a.selectedSuggestionElement=function(){return this.suggestionElements().filter(".text-selected").first()};a.isDropdownVisible=function(){return!0===this.containerElement().is(":visible")};a.onGetFormData=
function(b,a,c){b=this.val();a[100]=this.formDataObject(b,b)};a.initPriority=function(){return 200};a.onHideDropdown=function(b){this.hideDropdown()};a.onToggleDropdown=function(b){this.trigger(this.containerElement().is(":visible")?"hideDropdown":"showDropdown")};a.onShowDropdown=function(b,a){var g=this.selectedSuggestionElement().data("text-suggestion");if(!this._suggestions)return this.trigger("getSuggestions");c.isFunction(a)?a(this):(this.renderSuggestions(this._suggestions),this.toggleNextSuggestion());
this.showDropdown(this.containerElement());this.setSelectedSuggestion(g)};a.onSetSuggestions=function(b,a){var c=this._suggestions=a.result;!1!==a.showHideDropdown&&this.trigger(null===c||0===c.length?"hideDropdown":"showDropdown")};a.getSuggestions=function(){var b=this.val();this._previousInputValue!=b&&(""==b&&(current=null),this._previousInputValue=b,this.trigger("getSuggestions",{query:b}))};a.clearItems=function(){this.containerElement().find(".text-list").children().remove()};a.renderSuggestions=
function(b){var a=this;a.clearItems();c.each(b||[],function(b,c){a.addSuggestion(c)})};a.showDropdown=function(){this.containerElement().show()};a.hideDropdown=function(){var b=this.containerElement();this._previousInputValue=null;b.hide()};a.addSuggestion=function(b){var a=this.opts("autocomplete.render");this.addDropdownItem(a?a.call(this,b):this.itemManager().itemToString(b)).data("text-suggestion",b)};a.addDropdownItem=function(b){var a=this.containerElement().find(".text-list"),g=c(this.opts("html.suggestion"));
g.find(".text-label").html(b);a.append(g);return g};a.clearSelected=function(){this.suggestionElements().removeClass("text-selected")};a.toggleNextSuggestion=function(){var b=this.selectedSuggestionElement(),a;0<b.length?(a=b.next(),0<a.length&&b.removeClass("text-selected")):a=this.suggestionElements().first();a.addClass("text-selected");this.scrollSuggestionIntoView(a)};a.togglePreviousSuggestion=function(){var a=this.selectedSuggestionElement().prev();0!=a.length&&(this.clearSelected(),a.addClass("text-selected"),
this.scrollSuggestionIntoView(a))};a.scrollSuggestionIntoView=function(a){var c=a.outerHeight(),g=this.containerElement(),f=g.innerHeight(),l=g.scrollTop();a=(a.position()||{}).top;var k=null,e=parseInt(g.css("paddingTop"));null!=a&&(a+c>f&&(k=a+l+c-f+e),0>a&&(k=a+l-e),null!=k&&g.scrollTop(k))};a.selectFromDropdown=function(){var a=this.selectedSuggestionElement().data("text-suggestion");a&&(this.val(this.itemManager().itemToString(a)),this.core().getFormData());this.trigger("hideDropdown")};a.withinWrapElement=
function(a){return 0<this.core().wrapElement().find(a).size()}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtFilter=h;c.fn.textext.addPlugin("filter",h);c=h.prototype;var a={filter:{enabled:!0,items:null}};c.init=function(c){this.baseInit(c,a);this.on({getFormData:this.onGetFormData,isTagAllowed:this.onIsTagAllowed,setSuggestions:this.onSetSuggestions});this._suggestions=null};c.onGetFormData=function(a,b,c){a=this.val();c="";this.core().hasPlugin("tags")||(this.isValueAllowed(a)&&(c=a),b[300]=this.formDataObject(a,c))};c.isValueAllowed=function(a){var b=this.opts("filterItems")||
this._suggestions||[],c=this.itemManager(),g=!this.opts("filter.enabled"),f;for(f=0;f<b.length&&!g;f++)c.compareItems(a,b[f])&&(g=!0);return g};c.onIsTagAllowed=function(a,b){b.result=this.isValueAllowed(b.tag)};c.onSetSuggestions=function(a,b){this._suggestions=b.result}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtFocus=h;c.fn.textext.addPlugin("focus",h);c=h.prototype;var a={html:{focus:'<div class="text-focus"/>'}};c.init=function(c){this.baseInit(c,a);this.core().wrapElement().append(this.opts("html.focus"));this.on({blur:this.onBlur,focus:this.onFocus});this._timeoutId=0};c.onBlur=function(a){var b=this;clearTimeout(b._timeoutId);b._timeoutId=setTimeout(function(){b.getFocus().hide()},100)};c.onFocus=function(a){clearTimeout(this._timeoutId);this.getFocus().show()};
c.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtPrompt=h;c.fn.textext.addPlugin("prompt",h);var a=h.prototype,k={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};a.init=function(a){var d;this.baseInit(a,k);d=c(this.opts("html.prompt"));c(this).data("container",d);this.core().wrapElement().append(d);this.setPrompt(this.opts("prompt"));(d=a.input().attr("placeholder"))||(d=this.opts("prompt"));a.input().attr("placeholder","");d&&this.setPrompt(d);0<c.trim(this.val()).length&&this.hidePrompt();
this.on({blur:this.onBlur,focus:this.onFocus,postInvalidate:this.onPostInvalidate,postInit:this.onPostInit})};a.onPostInit=function(a){this.invalidateBounds()};a.onPostInvalidate=function(a){this.invalidateBounds()};a.invalidateBounds=function(){var a=this.input();this.containerElement().css({paddingLeft:a.css("paddingLeft"),paddingTop:a.css("paddingTop")})};a.onBlur=function(a){var c=this;c.startTimer("prompt",0.1,function(){c.showPrompt()})};a.showPrompt=function(){var a=this.input();0!==c.trim(this.val()).length||
a.is(":focus")||this.containerElement().removeClass("text-hide-prompt")};a.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass("text-hide-prompt")};a.onFocus=function(a){this.hidePrompt()};a.setPrompt=function(a){this.containerElement().text(a)};a.containerElement=function(){return c(this).data("container")}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtSuggestions=h;c.fn.textext.addPlugin("suggestions",h);c=h.prototype;var a={suggestions:null};c.init=function(c){this.baseInit(c,a);this.on({getSuggestions:this.onGetSuggestions,postInit:this.onPostInit})};c.setSuggestions=function(a,b){this.trigger("setSuggestions",{result:a,showHideDropdown:!1!=b})};c.onPostInit=function(a){this.setSuggestions(this.opts("suggestions"),!1)};c.onGetSuggestions=function(a,b){var c=this.opts("suggestions");c.sort();this.setSuggestions(this.itemManager().filter(c,
b.query))}})(jQuery);
(function(c){function h(){}c.fn.textext.TextExtTags=h;c.fn.textext.addPlugin("tags",h);var a=h.prototype,k="text-tag",b="."+k,d=".text-label",g={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a title="Remove" class="text-remove"/></div></div>'}};a.init=function(a){this.baseInit(a,g);a=this.input();var b;this.opts("tags.enabled")&&(b=c(this.opts("html.tags")),a.after(b),c(this).data("container",b),this.on({enterKeyPress:this.onEnterKeyPress,
backspaceKeyDown:this.onBackspaceKeyDown,preInvalidate:this.onPreInvalidate,postInit:this.onPostInit,getFormData:this.onGetFormData}),this.on(b,{click:this.onClick,mousemove:this.onContainerMouseMove}),this.on(a,{mousemove:this.onInputMouseMove}));this._originalPadding={left:parseInt(a.css("paddingLeft")||0),top:parseInt(a.css("paddingTop")||0)};this._paddingBox={left:0,top:0};this.updateFormCache()};a.containerElement=function(){return c(this).data("container")};a.onPostInit=function(a){this.addTags(this.opts("tags.items"))};
a.onGetFormData=function(a,b,c){a=13===c?"":this.val();b[200]=this.formDataObject(a,this._formData)};a.initPriority=function(){return 100};a.onInputMouseMove=function(a){this.toggleZIndex(a)};a.onContainerMouseMove=function(a){this.toggleZIndex(a)};a.onBackspaceKeyDown=function(a){a=this.tagElements().last();0==this.val().length&&this.removeTag(a)};a.onPreInvalidate=function(a){a=this.tagElements().last();var b=a.position();0<a.length?b.left+=a.innerWidth():b=this._originalPadding;this._paddingBox=
b;this.input().css({paddingLeft:b.left,paddingTop:b.top})};a.onClick=function(a){function g(a,b){p.data(k,a);p.find(d).text(h.itemManager().itemToString(a));h.updateFormCache();e.getFormData();e.invalidateBounds();b&&e.focusInput()}var h=this,e=h.core();a=c(a.target);var n=0,p;a.is(".text-tags")?n=1:a.is(".text-remove")?(h.removeTag(a.parents(b+":first")),n=1):a.is(d)&&(p=a.parents(b+":first"),h.trigger("tagClick",p,p.data(k),g));n&&e.focusInput()};a.onEnterKeyPress=function(a){a=this.val();a=this.itemManager().stringToItem(a);
this.isTagAllowed(a)&&(this.addTags([a]),this.core().focusInput())};a.updateFormCache=function(){var a=[];this.tagElements().each(function(){a.push(c(this).data(k))});this._formData=a};a.toggleZIndex=function(a){var b=this.input().offset(),c=a.clientX-b.left,e=a.clientY-b.top,d=this._paddingBox;a=this.containerElement();b=a.is(".text-tags-on-top");c=c>d.left&&e>d.top;if(!b&&!c||b&&c)a[(b?"remove":"add")+"Class"]("text-tags-on-top")};a.tagElements=function(){return this.containerElement().find(b)};
a.isTagAllowed=function(a){a={tag:a,result:!0};this.trigger("isTagAllowed",a);return!0===a.result};a.addTags=function(a){if(a&&0!=a.length){var b=this.core(),c=this.containerElement(),e,d;for(e=0;e<a.length;e++)(d=a[e])&&this.isTagAllowed(d)&&c.append(this.renderTag(d));this.updateFormCache();b.getFormData();b.invalidateBounds()}};a.getTagElement=function(a){var b=this.tagElements(),d,e;for(d=0;d<b.length,e=c(b[d]);d++)if(this.itemManager().compareItems(e.data(k),a))return e};a.removeTag=function(a){var b=
this.core(),d;a instanceof c?(d=a,a.data(k)):d=this.getTagElement(a);d.remove();this.updateFormCache();b.getFormData();b.invalidateBounds()};a.renderTag=function(a){var b=c(this.opts("html.tag"));b.find(".text-label").text(this.itemManager().itemToString(a));b.data(k,a);return b}})(jQuery);